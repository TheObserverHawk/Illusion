---
## Metadata
tags : 
 - Note_done Note_WIP Informatique
 - 
source : UMons - Fonctionnement des ordinateurs
---

Link :
_Fonctionnement des ordinateurs : Repr√©sentation des nombres naturels & entiers_
1. [[../2 - Repr√©sentation des nombres naturels & entiers/2.3.2.1 - Bit|2.3.2.1 - Bit]]

_Fonctionnement des ordinateurs : Caract√®res & Cha√Ænes de caract√®res_
1.

_Fonctionnement des ordinateurs : El√©ments de conception logique_
1.

_Fonctionnement des ordinateurs : Processeur_
1.

_Fonctionnement des ordinateurs : Micro-architecture_
1.

_Fonctionnement des ordinateurs : Assemblage & Compilation_
1.

_Fonctionnement des ordinateurs : Hi√©rarchie de m√©moires_
1.

_Fonctionnement des ordinateurs : Nombres flottants_
1. [[9.1 - Repr√©sentation d'un nombre flottant en virgule fixe (fixed point)]]
2. [[9.1.2 - Bit significatif]]
3. [[9.2.1 - Biais de l'exposant (Repr√©sentation en virgule flottant)]]
4. [[9.2.2 - Repr√©sentation normalis√©e (Nombre flottant)]]

**Introduction** : (Repr√©sentation d'un nombre flottant en virgule flottant)
**D√©finition** : Les bits significatifs sont tous les bits qui suivent le premier bit non-nul, ce dernier y compris. 

#### Exemple :
Consid√©rons deux nombres repr√©sent√©s en virgule fixe avec $N=8$ et $M=4$ 
**Illustration** : ![[../../../../0 - Dossier Template/Dossier IMage/Pasted image 20240429142808.png]]
_Observation_ : en repr√©sentation en virgule fixe, les grands nombres ont plus de bits significatifs que les petits nombres. Pour les petits nombres, les bits de poids fort de la repr√©sentation ne sont pas utilis√©s efficacement. Comment am√©liorer cela ?
# D√©finition
La repr√©sentation en virgule flottante est similaire √† la repr√©sentation en virgule fixe √† l'exception de la position de la virgule qui est variable (flottante).

---
**Rappel** : ![[../../../../0 - Dossier Template/Dossier IMage/Pasted image 20240429144113.png]]
La formule pour repr√©senter les nombres flottants en virgule fixe est $$x={\color{purple}m}.2^{{\color{orange}-M}}=\frac{{\color{purple}m}}{2^{\color{orange}M}}$$ o√π ${\color{orange}-M}$ l'exposant fixe

---
La position de la virgule est encod√©e dans la repr√©sentation, sous forme d'une ${\color{green}\text{valeur d'exposant } e}$ pour le d√©nominateur, $\color{green}\text{encod√©e sur E bits}$ 
**Illustration** : ![[../../../../0 - Dossier Template/Dossier IMage/Pasted image 20240429144802.png]]
La formule pour repr√©senter les nombres flottants en virgule flottant est $$x={\color{purple}m}.2^{{\color{lightgreen}e}}=\frac{{\color{purple}m}}{2^{\color{\lightgreen}-e}}$$
## Principe 
La valeur $x$ repr√©sent√©e est obtenue par l'√©quation suivante $$\begin{aligned}x&={\color{purple}m}.2^{\color{lightgreen}e}\\&=\left({\color{purple}\sum_{i=0}^{M-1}m_i.2^i}\right).2^{\left({\color{lightgreen}\sum_{j=0}^{E-1}e_j.2^j}\right)}\end{aligned}$$
**Illustration** : ![[../../../../0 - Dossier Template/Dossier IMage/Pasted image 20240429150602.png]]
La valeur de $m$ est obtenue en interpr√©tant les $M$ bits correspondants comme un naturel. $M$ contr√¥le le nombre de bits significatifs support√©s par la repr√©sentation
\
De fa√ßon similaire, la valeur de $e$ est obtenue en interpr√©tant les $E$ bits correspondants comme un naturel. $E$ contr√¥le la position de la virgule et donc la possibilit√© de repr√©senter des nombres plus ou moins grands/petits.

### Inconv√©nient 
Math√©matiquement parlant, c'est plus efficace. Cependant, comment impl√©menter ce genre de processus physiquement i.e. comment la machine peut faire la diff√©rence entre des exposants n√©gatifs et des exposants positifs ?
#### Solution : Biais de l'exposant
Afin de permettre des exposants positifs et n√©gatifs, on convient d'un ${\color{blue}\text{biais }B}$ fixe qui est soustrait de la valeur encod√©e de l'$\color{lightgreen}\text{exposant }e$.
\
La valeur de $B$ est choisie de fa√ßon √† permettre l'encodage d'autant d'exposants positifs que d'exposants n√©gatifs. Elle est g√©n√©ralement d√©riv√©e du nombre de bits $E$ utilis√©s pour encoder l'exposant $e$, comme $${\color{blue}B}=2^{{\color{lightgreen}E}-1}-1\quad\cup\quad{\color{blue}B}=2^{{\color{lightgreen}E}-1}$$ _Exemple_ : Supposons $E=8$, $B$ vaut alors 127, ce qui permet d'exprimer des exposants $(e - B)$ allant de -127 √† 128. En effet, on peut repr√©senter dans l'exposant $e$ : $$[0,2^E-1]\iff[0,2^E[$$ i.e. $$\begin{aligned}0&\le e<2^E\\\iff0-B&\le e-B<2^E-B\\\iff0-127&\le e- B<2^8-127=129\end{aligned}$$ La valeur $x$ repr√©sent√©e est alors obtenue par l'√©quation suivante. La valeur du biais $B$, fix√©e par convention, n'est pas encod√©e dans la repr√©sentation : $$x=m.2^{e-B}$$
\
_Remarque_ : 
1. Comme il y a $2^E$ naturels repr√©sentables avec $E$ bits, m√™me en prenant $B$ comme point milieu, il est impossible d‚Äôavoir autant de valeurs positives que de valeurs n√©gatives

##### Exemple
Supposons taille mantisse $M=12$ ; taille exposant $E=4$ ; biais $B=8$
Que valent les nombres repr√©sent√©s par les mots suivants ? 
1. $$\begin{aligned}w=& {\color{red}0}\underbrace{{\color{red}10011000011}{\color{lightgreen}0100}}_{\text{11 chiffres significatifs}}\\\text{x=}& ({\color{red}2^{10}+2^7+2^6+2^1+2^0}).2^{{\color{lightgreen}(2^2})-8}  \\
=& (1024+128+64+2+1).2^{4-8}  \\
\text{=}& (1024+128+64+2+1).2^{-4}  \\
\text{=}& \text{76,1875} 
\end{aligned}$$
2. $$\begin{aligned}w&=\underbrace{{\color{red}100110000110}{\color{lightgreen}0011}}_{\text{12 chiffres significatifs}}\\x&= ({\color{red}2^{11}+2^8+2^7+2^2+2^1}).2^{({\color{lightgreen}2^1+2^0})-8}  \\
&= (2048+256+128+4+2).2^{3-8}  \\
&= (2048+256+128+4+2).2^{-5}  \\
&=76,1875  \end{aligned}$$

_Remarque_ : 
1. _Observation_¬†: il peut exister plusieurs repr√©sentations d'un m√™me nombre, avec un nombre de chiffres significatifs diff√©rents¬†!
2. Le 2e exemple ayant maximiser le nombre de bits significatifs est appel√© la repr√©sentation normalis√©e

###### Comment trouver d'autre repr√©sentation d'un m√™me nombre avec un nombre de chiffres significatifs diff√©rents¬†?
**Processus** : 
1. On garde le m√™me nombre en repr√©sentation binaire.
_Exemple_ : $w$ = `0100 1100 0011` `0100` = 76,1875
1. on multiplie par 2 i.e. 1 d√©calage d'une unit√© vers la gauche dans la mantisse :
$w$ = `100 1100 0011` `0100` 
2. Ajoutez un bit `0` dans les bits de poids faibles de la mantisse
$w$ = `1001 1000 0110` `0100`, ce qui permet de maximiser les bits significatifs, par cons√©quent la formation de la repr√©sentation normalis√©e
3. On soustrait d'un bit dans l'exposant $e$ de $E$ bits 
$w$ = `1001 1000 0110` `0011` = 76,1875
##### Pourquoi il existe 2 variantes de biais de l'exposant ?
Le biais dans le contexte des nombres en virgule flottante est utilis√© pour repr√©senter l'exposant dans un format normalis√©. En fonction du standard de virgule flottante utilis√©, le biais peut √™tre calcul√© de diff√©rentes mani√®res :
- $${\color{blue}B}=2^{{\color{lightgreen}E}-1}-1$$ est utilis√© pour le format non normalis√©
- $${\color{blue}B}=2^{{\color{lightgreen}E}-1}$$ est utilis√© pour le format normalis√© car dans un format normalis√©, le bit de poids le plus √©lev√© de la mantisse est toujours implicite, ce qui signifie qu'il est toujours √©gal √† 1.

Dans le cas de la norme IEEE 754 pour les nombres en virgule flottante, il existe en effet deux d√©finitions courantes du biais, selon que l'on parle de nombres en simple pr√©cision (32 bits) ou en double pr√©cision (64 bits).

1. **Pour les nombres en simple pr√©cision (32 bits)** : Le biais est d√©fini comme $$2^{ùê∏‚àí1}‚àí1$$, o√π $ùê∏$ est le nombre de bits allou√©s pour l'exposant. Dans le cas de la norme IEEE 754 pour les nombres en simple pr√©cision, $ùê∏=8$, donc le biais serait $$2^7‚àí1=127$$
    
2. **Pour les nombres en double pr√©cision (64 bits)** : Le biais est d√©fini comme $$2^{ùê∏‚àí1}$$ Pour la norme IEEE 754 pour les nombres en double pr√©cision, $ùê∏=11$, donc le biais serait $$2^{10}=1024$$

Ces valeurs de biais sont utilis√©es pour repr√©senter l'exposant de mani√®re d√©cal√©e, permettant ainsi de repr√©senter des nombres √† virgule flottante √† la fois positifs et n√©gatifs avec une certaine plage d'exposants.

## Repr√©sentation normalis√©e
La repr√©sentation en virgule flottante permet de maximiser le nombre de bits significatifs. A cet effet, on privil√©gie l‚Äôusage d‚Äôune mantisse qui est normalis√©e.
\
Une mantisse $m$ est normalis√©e si et seulement si $m$ est de la forme $$m=\underbrace{1\ m_{M-2}\cdots m_0}_{M\text{ bits significatifs (Maximum)}}$$ o√π
1. $1$ : le bit de poids fort qui vaut 1
2. $m_{M-2}\cdots m_0$ : les autres bits qui peuvent valoir entre 0 et 1

La repr√©sentation en virgule flottante $w = (m, e)$ d‚Äôun nombre est normalis√©e si sa mantisse $m$ est normalis√©e.
\
_Remarque_ : 
1. La repr√©sentation normalis√©e ne permet pas de repr√©senter le nombre 0 en tant que le bit de poids fort. Par cons√©quent le nombre 0 n'est pas repr√©sentable

### Algorithme - Normalisation
Soit un nombre $x\neq 0$ 
On souhaite trouver $(m, e)$ tel que $m$ est normalis√© (i.e. de la forme 1,‚Ä¶) et $x = m.2^e$ 
```python
m = x 
e = 0 
while m < 1: 
	m = m * 2 
	e = e ‚Äì 1 
while m >= 2: 
	m = m / 2
	e = e + 1
```
Prenons 2 exemple : 17,33 et 0,19

| $m$      | $e$ |
| -------- | --- |
| 17,33    | 0   |
| 8,665    | 1   |
| 4,3325   | 2   |
| 2,16625  | 3   |
| 1,083125 | 4   |
Donc, on a que $$17,33 = 1,08\cdots . 2^4$$

| $m$  | $e$ |
| ---- | --- |
| 0,19 | 0   |
| 0,38 | -1  |
| 0,76 | -2  |
| 1,52 | -3  |
Donc, on a que $$0,19=1,52\cdots.2^{-3}$$
### Peut-on encore am√©liorer la pr√©cision de la repr√©sentation d'un nombre r√©el ? (Bit cach√©)
En repr√©sentation normalis√©e, le bit le plus significatif est toujours √©gal √† 1. Il est donc inutile de le repr√©senter : $$m=\underbrace{1\ m_{M-2}\cdots m_0}_{M\text{ bits significatifs (maximum)}}$$ On peut donc utiliser un bit cach√© (hidden digit), c-√†-d. pris en compte mais non repr√©sent√© : $$m=\underbrace{(1)\ m_{M-1}\cdots m_0}_{M+1\text{ bits significatifs (maximum)}}$$ Cela permet de r√©cup√©rer 1 bit suppl√©mentaire pour la mantisse, ce qui permet d‚Äôaugmenter la pr√©cision.
#### Exemple
Supposons : Taille mantisse $\color{red}M=12$ ; taille exposant $\color{lightgreen}E=4$ ; biais $\color{blue}B=8$ 
1. _En repr√©sentation normalis√©e_, le nombre 76,1875 est repr√©sent√© comme ![[../../../../0 - Dossier Template/Dossier IMage/Pasted image 20240509161832.png]] $$x=\left({\color{red}2^{11}+2^8+2^7+2^2+2^1}\right).2^{{\color{lightgreen}2^1+2^0}}$$